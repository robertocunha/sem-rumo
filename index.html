<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roda Online ‚Äî ao vivo</title>
  <meta name="description"
    content="Happening digital do grupo Sem Rumo. Streaming + coment√°rios ao vivo. Chega mais." />
  <meta property="og:title" content="Sem Rumo ‚Äî ao vivo" />
  <meta property="og:description" content="Happening digital do grupo Sem Rumo. Streaming + coment√°rios ao vivo." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/og.jpg" />
  <meta name="theme-color" content="#0f0f10" />
  <link rel="stylesheet" href="styles/main.css" />
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">SR</div>
        <div>
          <h1>Roda Online <span class="small">¬∑ happening ao vivo</span></h1>
          <div class="subtitle">Uma p√°gina que muda quando a roda acontece.</div>
        </div>
      </div>
      <div class="live" id="livePill" title="Status da transmiss√£o">
        <div class="dot"></div>
        <strong>AO VIVO</strong>
      </div>
    </header>

    <div class="grid">
      <!-- BLOCO DO STREAMING -->
      <section class="card" aria-label="Transmiss√£o">
        <div class="frame" id="player">
          <!--
            üî¥ COMO USAR (YouTube):
            1) Crie uma live no YouTube (n√£o listado) no app do celular.
            2) Pegue o ID do v√≠deo ao vivo (ex: dQw4w9WgXcQ).
            3) Abra esta p√°gina com a query ?yt=ID
               Ex.: https://gruposemrumo.com.br/?yt=dQw4w9WgXcQ
            4) Alternativa: defina diretamente o data-src abaixo.

            üîµ COMO USAR (Twitch):
            Use a query ?twitch=nomeDoCanal
            Ex.: https://gruposemrumo.com.br/?twitch=semrumo
          -->
          <div class="placeholder" id="placeholder">Transmiss√£o fora do ar no momento.</div>
          <iframe id="iframe"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen loading="lazy"></iframe>
        </div>
        <div class="panel">
          <div class="note">Dica: deixe o celular num trip√©, inicie a live e pronto. A p√°gina se vira.</div>
          <div class="share">
            <button class="btn" id="btnShare">Compartilhar</button>
            <a class="btn" id="btnWhats" href="#" target="_blank" rel="noopener">WhatsApp</a>
            <a class="btn" id="btnX" href="#" target="_blank" rel="noopener">X/Twitter</a>
            <a class="btn" id="btnTelegram" href="#" target="_blank" rel="noopener">Telegram</a>
            <button class="btn" id="btnCopy">Copiar link</button>
          </div>
        </div>
      </section>

      <!-- BLOCO DO CHAT / COMENT√ÅRIOS -->
      <aside class="card" aria-label="Coment√°rios">
        <div class="chat-header">
          <div class="tag">COMENT√ÅRIOS</div>
          <div class="note">Sem login. Entrou, escreveu.</div>
        </div>
        <div class="frame" style="aspect-ratio: 9/12">
          <iframe src="https://www3.cbox.ws/box/?boxid=3548631&boxtag=CgeXBW" width="100%" height="450"
            allowtransparency="yes" allow="autoplay" frameborder="0" marginheight="0" marginwidth="0"
            scrolling="auto"></iframe>
        </div>
    </div>
    </aside>
  </div>

  <footer>
    <div>Sem Rumo ‚Äî feito para mudar sempre. ‚ú¶</div>
  </footer>
  </div>

<script>
  (function () {
    const iframe = document.getElementById('iframe');
    const placeholder = document.getElementById('placeholder');
    const livePill = document.getElementById('livePill');

    const params = new URLSearchParams(location.search);
    const yt = params.get('yt');      // ID de v√≠deo OU de playlist (YouTube)
    const twitch = params.get('twitch'); // nome do canal (Twitch)

    function setSrc(url) {
      iframe.src = url;
      iframe.addEventListener('load', () => {
        placeholder.style.display = 'none';
        livePill.style.opacity = 1;
      }, { once: true });
    }

    if (yt) {
      // Se come√ßar com "PL", assumimos que √© playlist do YouTube
      if (yt.startsWith('PL')) {
        setSrc(`https://www.youtube.com/embed/videoseries?list=${yt}&autoplay=1&loop=1&rel=0&modestbranding=1`);
      } else {
        // V√≠deo √∫nico com loop
        setSrc(`https://www.youtube.com/embed/${yt}?autoplay=1&rel=0&modestbranding=1&loop=1&playlist=${yt}`);
      }
    } else if (twitch) {
      // Twitch requer informar o dom√≠nio no par√¢metro parent
      const parent = location.hostname || 'localhost';
      setSrc(`https://player.twitch.tv/?channel=${encodeURIComponent(twitch)}&parent=${encodeURIComponent(parent)}&muted=false&autoplay=true`);
    } else {
      livePill.style.opacity = .5; // fora do ar
    }

    // ======= Compartilhamento =======
    const shareData = {
      title: 'Sem Rumo ‚Äî ao vivo',
      text: 'Cola no happening do Sem Rumo agora. T√° rolando!',
      url: location.href
    };
    const byId = id => document.getElementById(id);
    const btnShare = byId('btnShare');
    const btnWhats = byId('btnWhats');
    const btnX = byId('btnX');
    const btnTelegram = byId('btnTelegram');
    const btnCopy = byId('btnCopy');

    btnShare.addEventListener('click', async () => {
      if (navigator.share) {
        try { await navigator.share(shareData); } catch (e) { }
      } else {
        try {
          await navigator.clipboard.writeText(location.href);
          btnShare.textContent = 'Link copiado!';
          setTimeout(() => btnShare.textContent = 'Compartilhar', 1400);
        } catch (e) { alert('Copie o link manualmente: ' + location.href); }
      }
    });

    const enc = encodeURIComponent;
    const url = location.href;
    btnWhats.href = `https://wa.me/?text=${enc(url)}`;
    btnX.href = `https://twitter.com/intent/tweet?url=${enc(url)}&text=${enc('Sem Rumo ‚Äî ao vivo')}`;
    btnTelegram.href = `https://t.me/share/url?url=${enc(url)}&text=${enc('Sem Rumo ‚Äî ao vivo')}`;
    btnCopy.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(url);
        btnCopy.textContent = 'Copiado!';
        setTimeout(() => btnCopy.textContent = 'Copiar link', 1200);
      } catch (e) { alert('Copie o link: ' + url); }
    });
  })();
</script>

</body>

</html>
<!-- Este √© um coment√°rio adicionado pelo Manus para fins de teste. -->

